<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
<hr>
<div class="container bootstrap snippet">
  <div class="row">
    <div class="col-lg-12">
      <div class="main-box no-header clearfix">
        <div class="main-box-body clearfix">
          <div class="table-responsive">
            <table class="table user-list">
              <thead>
              <tr>
                <th><span>Candidat</span></th>
                <th><span>Email</span></th>
                <th ><span>CV</span></th>
                <th><span>Lettre de motivation</span></th>
                <th>&nbsp;</th>
              </tr>
              </thead>
              <tbody *ngFor = "let demande of demandes">
              <tr>
                <td>
                  <img src="https://bootdey.com/img/Content/user_1.jpg" alt="">
                  <a href="#" class="user-link">{{demande.candidat.nom}}  {{demande.candidat.prenom}}</a>
                  <span class="user-subhead">{{demande.date}}</span>
                </td>
                <td>
                  <a href="#">{{demande.candidat.email}}</a>
                </td>
                <td>
                  <span class="label label-default">cv</span>
                </td>
                <td style="width: 20%;" data-toggle="modal" [attr.data-target]="'#m'+demande.id"  nbButton class="center">
                   <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-envelope-open fa-stack-1x fa-inverse"></i>
                                            </span>
                  <div [innerHTML]="lettreMotivation"></div>
                </td>
                <td style="width: 20%;">
                  <a *ngIf="user.role.id== '1' && demande.etat=='en cours'"  type="button" (click)="accepte(demande)" class="table-link">
                                            <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-check fa-stack-1x fa-inverse"></i>
                                            </span>
                  </a>
                  <a *ngIf="user.role.id== '1' && demande.etat=='en cours'"  type="button" (click)="refuser(demande)" class="table-link danger">
                                            <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-times fa-stack-1x fa-inverse"></i>
                                            </span>
                  </a>
                  <a *ngIf="user.role.id== '2'&& demande.etat=='acceptÃ©'" type="button" (click)="date(demande)" class="table-link">
                                            <span class="fa-stack">
                                                <i class="fa fa-square fa-stack-2x"></i>
                                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                                            </span>
                  </a>
                </td>
              </tr>



              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div  *ngFor = "let demande of demandes">
<div class="modal fade" [id]="'m'+demande.id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Lettre de motivation</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" [innerHTML]="demande .lettreMotivation">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
</div>
